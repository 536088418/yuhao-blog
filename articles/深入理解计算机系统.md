# 深入理解计算机系统个人笔记

## 计算机系统漫游

### 1.1信息

- 计算机系统组成 :**硬件**和**系统软件**

- 信息 ：位 +上下文

  

### 1.2程序执行时被其他程序翻译过程

- GCC编译器驱动程序翻译过程

  以hello.c程序为例：

  ```c
  #include <stdio.h>
  
  int main()
  {
      printf("hello, world\n");
      return 0;
      
  }
  ```

  |                 | hello.c   # 源程序(文本)                              |
  | --------------- | ----------------------------------------------------- |
  | 预处理器（cpp） | hello.c  -> hello.i  # 修改的源程序(文本)             |
  | 编译器(ccl)     | hello.i   -> hello.s # 汇编程序(文本)                 |
  | 汇编器(as)      | hello.s  -> hello.o # 可重定位目标程序(二进制)        |
  | 链接器(ld)      | hello.o + printf.o  -> hello # 可执行目标程序(二进制) |

  

### 1.3了解编译系统益处

- 优化程序性能
- 理解链接的错误
- 避免安全漏洞



### 1.4处理器读取解释储存在内存中的命令

-  shell 命令行解释器

  > shell 处理过程 
  >
  > > 等待命令输入
  > >
  > > 判断命令 内置命令/可执行文件
  > >
  > > 加载
  > >
  > > 输出

  ​                

- 总线

  定义 ：贯穿整个系统的一组电子管道

  作用 ： 传输定长的字节块（字）

  >  字长 字中的字节数  
  >
  > > 32位 机械字长  4
  > >
  > > 64位                   8

- I/O设备

  常见设备 键盘， 鼠标，显示器，磁盘......

  每个I/O设备都通过一个 **控制器** 或 **适配器** 与I/O总线相连

  > 控制器 ：I/O设备本身或系统的**主印制电路板**（**主板**）上的芯片组
  >
  > 适配器 ：插在主板插槽的卡
  >
  > 它们功能都是在I/O总线和I/O设备之间传递信息

​     ![一个典型系统的硬件组成](https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimage.mamicode.com%2Finfo%2F201808%2F20180806235549835389.png&refer=http%3A%2F%2Fimage.mamicode.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1661398174&t=5fa84c99f312b34986392b0cac6ff1c6)

- 主存

  临时存储设备，用来存放程序和程序处理的数据

  > 主存
  >
  > > 物理方面 ：由一组 **动态随机存储器** (DRAM)芯片组成的
  > >
  > > 逻辑方面： 线性的字节数组 (每个字节都有其唯一的地址)

- 处理器

  中央处理单元(cpu) 简称处理器，解释或执行存储在主存中指令的引擎

  处理器核心 ：大小为一个字的存储设备(**寄存器**),被称为**程序计数处理器(PC)**

​                             在任何时刻，pc都指向主存中的某条机械语言指令(即含有该条指令的地址)

- cpu执行的简单操作：

  > 加载：从主存复制一个字节或者一个字到寄存器，以覆盖寄存器原来的内容
  >
  > 存储：从寄存器复制一个字节或者一个字到主存的某个位置，以覆盖这个位置上原来的内容
  >
  > 操作： 把两个寄存器的内容复制到ALU，ALU对这两个字做算数运算，并将结果存放到一个寄存器中，以覆盖该寄存器中原来的内容
  >
  > 跳转：从指令本身中抽取一个字，并将这个字复制到程序集计数器（PC）中，以覆盖PC中原来的值

- 处理器指令集架构： 描述每条机械代码指令的效果(抽象性)
- 处理器微体系结构：处理器实际是怎么实现的
